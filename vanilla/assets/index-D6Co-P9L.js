(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var I={particleCount:100,minRadius:2,maxRadius:6,particleColor:"#000000",lineColor:"#000000",lineWidth:1,lineOpacity:.2,maxDistance:150,moveSpeed:1,backgroundColor:"#ffffff",backgroundOpacity:1,particleOpacity:1,mouseRadius:200,mouseInteraction:!0,pulseEnabled:!0,pulseSpeed:0,depthEffectEnabled:!0,depthSpeed:.02,gradientEnabled:!1,gradientType:"linear",gradientColors:["#667eea","#764ba2"],gradientSpeed:.02,gradientMouseReaction:!0,gradientMouseInfluence:.5,gradientAngle:0,gradientRadius:1,gradientSpin:!1,gradientFlowAngle:45,gradientOrbitRadius:.3,gradientDithering:!0,gradientSmoothStops:4},E=/^#[0-9A-Fa-f]{6}$/;function L(e){return new Promise((n,t)=>{const i=new Image;i.onload=()=>n(i),i.onerror=()=>t(new Error(`Failed to load image: ${e.slice(0,50)}...`)),e.trim().startsWith("<")?i.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e))):i.src=e})}var O=class{constructor(e,n={}){this.particles=[],this.assetImages=new Map,this.assetTintCache=new Map,this.animationId=null,this.isRunning=!1,this.mousePosition=null,this.pulseAngle=0,this.gradientAngle=0,this.gradientFlowOffset=0,this.gradientCenter={x:0,y:0},this.smoothedMouseAngle=0,this.gradientDiv=null,this.canvas=e;const t=e.getContext("2d",{alpha:!0});if(!t)throw new Error("Could not initialize canvas context");this.ctx=t,this.config=this.validateConfig({...I,...n}),this.createGradientDiv(),this.boundHandleResize=this.handleResize.bind(this),this.boundHandleMouseMove=this.handleMouseMove.bind(this),this.boundHandleMouseLeave=this.handleMouseLeave.bind(this),this.handleResize(),this.createParticles(),this.loadAssets(),this.setupEventListeners()}loadAssets(){const{particleAssets:e,assets:n}=this.config;if(!(e!=null&&e.length)||!n)return;const t=new Set;for(const i of e)t.add(i.asset);for(const i of t){const s=n[i];s&&L(s).then(a=>{this.assetImages.set(i,a)}).catch(()=>{})}}createGradientDiv(){var e;this.gradientDiv=document.createElement("div"),this.gradientDiv.style.cssText="position:fixed;inset:0;width:100%;height:100%;pointer-events:none;z-index:-1;",(e=this.canvas.parentElement)==null||e.insertBefore(this.gradientDiv,this.canvas)}validateConfig(e){const n=["particleCount","minRadius","maxRadius","lineWidth","lineOpacity","maxDistance","moveSpeed","backgroundOpacity","particleOpacity","mouseRadius","pulseSpeed","depthSpeed","gradientSpeed","gradientMouseInfluence","gradientAngle","gradientRadius","gradientFlowAngle","gradientOrbitRadius","gradientSmoothStops"];for(const s of n){const a=e[s];if(typeof a!="number"||isNaN(a))throw new Error(`Invalid ${s}: must be a number`)}const t=["mouseInteraction","pulseEnabled","depthEffectEnabled","gradientEnabled","gradientMouseReaction","gradientSpin","gradientDithering"];for(const s of t)if(typeof e[s]!="boolean")throw new Error(`Invalid ${s}: must be a boolean`);const i=["backgroundColor","particleColor","lineColor"];for(const s of i)if(!E.test(e[s]))throw new Error(`Invalid ${s}: must be a valid hex color`);if(e.gradientEnabled){if(!Array.isArray(e.gradientColors)||e.gradientColors.length<2)throw new Error("gradientColors must be an array of at least 2 hex colors");for(const s of e.gradientColors)if(!E.test(s))throw new Error(`Invalid gradient color: ${s} must be valid hex`);if(e.gradientType!=="linear"&&e.gradientType!=="radial")throw new Error("gradientType must be 'linear' or 'radial'");if(e.gradientStops){if(e.gradientStops.length!==e.gradientColors.length)throw new Error("gradientStops length must match gradientColors length");for(let s=0;s<e.gradientStops.length;s++){const a=e.gradientStops[s];if(typeof a!="number"||a<0||a>1)throw new Error(`gradientStops[${s}] must be a number 0-1`);if(s>0&&a<=e.gradientStops[s-1])throw new Error("gradientStops must be strictly increasing")}}}if(e.particleAssets&&e.particleAssets.length>0){if(!e.assets||typeof e.assets!="object")throw new Error("assets map is required when using particleAssets");for(let s=0;s<e.particleAssets.length;s++){const a=e.particleAssets[s];if(typeof a.asset!="string"||!a.asset)throw new Error(`particleAssets[${s}].asset must be a non-empty string`);const o=a.count!==void 0,r=a.percentage!==void 0;if(o===r)throw new Error(`particleAssets[${s}]: specify exactly one of count or percentage`);if(o&&(typeof a.count!="number"||a.count<0))throw new Error(`particleAssets[${s}].count must be a non-negative number`);if(r&&(typeof a.percentage!="number"||a.percentage<0||a.percentage>100))throw new Error(`particleAssets[${s}].percentage must be 0-100`);if(!e.assets[a.asset])throw new Error(`particleAssets[${s}]: asset "${a.asset}" not found in assets map`)}}if(e.assetColor!=null&&!E.test(e.assetColor))throw new Error("assetColor must be a valid hex color");if(e.assetOpacity!=null&&(typeof e.assetOpacity!="number"||e.assetOpacity<0||e.assetOpacity>1))throw new Error("assetOpacity must be a number 0-1");if(e.mouseAttractPercentage!=null&&(typeof e.mouseAttractPercentage!="number"||e.mouseAttractPercentage<0||e.mouseAttractPercentage>100))throw new Error("mouseAttractPercentage must be 0-100");if(e.mouseAttractAssets!=null&&(!Array.isArray(e.mouseAttractAssets)||e.mouseAttractAssets.some(s=>typeof s!="string")))throw new Error("mouseAttractAssets must be an array of strings");if(e.minParticleDistance!=null&&(typeof e.minParticleDistance!="number"||e.minParticleDistance<0))throw new Error("minParticleDistance must be a non-negative number");if(e.minParticleForce!=null&&(typeof e.minParticleForce!="number"||e.minParticleForce<0||e.minParticleForce>2))throw new Error("minParticleForce must be 0-2");return e}setupEventListeners(){window.addEventListener("resize",this.boundHandleResize),this.canvas.addEventListener("mousemove",this.boundHandleMouseMove),this.canvas.addEventListener("mouseleave",this.boundHandleMouseLeave)}cleanup(){var e;window.removeEventListener("resize",this.boundHandleResize),this.canvas.removeEventListener("mousemove",this.boundHandleMouseMove),this.canvas.removeEventListener("mouseleave",this.boundHandleMouseLeave),(e=this.gradientDiv)==null||e.remove(),this.gradientDiv=null,this.stop()}handleMouseMove(e){const n=this.canvas.getBoundingClientRect();this.mousePosition={x:e.clientX-n.left,y:e.clientY-n.top}}handleMouseLeave(){this.mousePosition=null}handleResize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.gradientCenter={x:this.canvas.width/2,y:this.canvas.height/2}}createParticles(){this.particles=[];const e=this.config.particleCount;for(let n=0;n<e;n++){const t=this.config.maxRadius-this.config.minRadius,i=Math.random()*t+this.config.minRadius;this.particles.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,dx:(Math.random()-.5)*this.config.moveSpeed,dy:(Math.random()-.5)*this.config.moveSpeed,radius:i,z:Math.random(),dz:(Math.random()-.5)*this.config.depthSpeed*2})}this.assignParticleAssets()}assignParticleAssets(){const{particleAssets:e,particleCount:n}=this.config;if(this.particles.forEach(a=>delete a.assetId),!(e!=null&&e.length)){this.assignMouseBehavior();return}const t=[];for(const a of e){let o;a.count!==void 0?o=Math.floor(a.count):o=Math.floor(n*(a.percentage??0)/100),o>0&&t.push({assetId:a.asset,count:o})}const i=[];for(let a=0;a<n;a++)i.push(a);for(let a=i.length-1;a>0;a--){const o=Math.floor(Math.random()*(a+1));[i[a],i[o]]=[i[o],i[a]]}let s=0;for(const{assetId:a,count:o}of t)for(let r=0;r<o&&s<i.length;r++,s++)this.particles[i[s]].assetId=a;this.assignMouseBehavior()}assignMouseBehavior(){const{mouseAttractPercentage:e,mouseAttractAssets:n,particleCount:t}=this.config;this.particles.forEach(s=>s.mouseAttract=!1);const i=new Set(n??[]);if(i.size>0&&this.particles.forEach(s=>{s.assetId&&i.has(s.assetId)&&(s.mouseAttract=!0)}),e!=null&&e>0){const s=Math.floor(t*Math.min(100,Math.max(0,e))/100),a=[];for(let o=0;o<t;o++)a.push(o);for(let o=a.length-1;o>0;o--){const r=Math.floor(Math.random()*(o+1));[a[o],a[r]]=[a[r],a[o]]}for(let o=0;o<s&&o<a.length;o++)this.particles[a[o]].mouseAttract=!0}}updateParticles(){this.particles.forEach(e=>{if(this.config.depthEffectEnabled&&(e.z+=e.dz,e.z<=0?(e.z=0,e.dz=Math.abs(e.dz)):e.z>=1&&(e.z=1,e.dz=-Math.abs(e.dz))),this.config.pulseEnabled){this.pulseAngle+=this.config.pulseSpeed;const s=Math.sin(this.pulseAngle)*.5+1;e.currentRadius=e.radius*s}else e.currentRadius=e.radius;if(this.config.depthEffectEnabled){const s=.4+.6*e.z;e.currentRadius=(e.currentRadius??e.radius)*s}if(e.x+=e.dx,e.y+=e.dy,this.config.mouseInteraction&&this.mousePosition){const s=this.mousePosition.x-e.x,a=this.mousePosition.y-e.y,o=Math.sqrt(s*s+a*a);if(o<this.config.mouseRadius){const r=(this.config.mouseRadius-o)/this.config.mouseRadius,l=Math.atan2(a,s),c=Math.cos(l)*r*.5,u=Math.sin(l)*r*.5;e.mouseAttract?(e.dx+=c,e.dy+=u):(e.dx-=c,e.dy-=u)}}const n=this.config.minParticleDistance??0,t=this.config.minParticleForce??.5;if(n>0&&t>0)for(const s of this.particles){if(s===e)continue;const a=s.x-e.x,o=s.y-e.y,r=Math.sqrt(a*a+o*o);if(r<n&&r>.001){const l=(n-r)/n*t,c=-a/r,u=-o/r;e.dx+=c*l,e.dy+=u*l}}(e.x<0||e.x>this.canvas.width)&&(e.dx=-e.dx),(e.y<0||e.y>this.canvas.height)&&(e.dy=-e.dy);const i=Math.sqrt(e.dx*e.dx+e.dy*e.dy);i>this.config.moveSpeed&&(e.dx=e.dx/i*this.config.moveSpeed,e.dy=e.dy/i*this.config.moveSpeed)})}getTintedCanvas(e,n){const t=`${e.src}_${n}`,i=this.assetTintCache.get(t);if(i)return i;const s=128,a=document.createElement("canvas");a.width=s,a.height=s;const o=a.getContext("2d");return o.fillStyle=n,o.fillRect(0,0,s,s),o.globalCompositeOperation="destination-in",o.drawImage(e,0,0,s,s),this.assetTintCache.set(t,a),a}drawParticles(){const e=this.config.particleColor,n=this.config.assetColor,t=this.config.assetOpacity??1;this.particles.forEach(i=>{let s=this.config.particleOpacity;this.config.depthEffectEnabled&&(s*=.6+.4*i.z);const a=i.currentRadius??i.radius,o=i.assetId?this.assetImages.get(i.assetId):null;if(o){this.ctx.globalAlpha=s*t;const r=a*2,l=i.x-a,c=i.y-a;n&&E.test(n)?this.ctx.drawImage(this.getTintedCanvas(o,n),l,c,r,r):this.ctx.drawImage(o,l,c,r,r)}else this.ctx.globalAlpha=s,this.ctx.fillStyle=e,this.ctx.beginPath(),this.ctx.arc(i.x,i.y,a,0,Math.PI*2),this.ctx.fill()}),this.ctx.globalAlpha=1}drawConnections(){for(let e=0;e<this.particles.length;e++)for(let n=e+1;n<this.particles.length;n++){const t=this.particles[e].x-this.particles[n].x,i=this.particles[e].y-this.particles[n].y,s=Math.sqrt(t*t+i*i);if(s<this.config.maxDistance){const a=1-s/this.config.maxDistance,o=this.hexToRgb(this.config.lineColor);this.ctx.beginPath(),this.ctx.strokeStyle=`rgba(${o}, ${a*this.config.lineOpacity})`,this.ctx.lineWidth=this.config.lineWidth,this.ctx.moveTo(this.particles[e].x,this.particles[e].y),this.ctx.lineTo(this.particles[n].x,this.particles[n].y),this.ctx.stroke()}}}drawBackground(){this.config.gradientEnabled&&this.gradientDiv?(this.gradientDiv.style.display="",this.gradientDiv.style.opacity=String(this.config.backgroundOpacity),this.updateGradientCSS(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):(this.gradientDiv&&(this.gradientDiv.style.display="none"),this.ctx.globalAlpha=this.config.backgroundOpacity,this.ctx.fillStyle=this.config.backgroundColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.globalAlpha=1)}updateGradientCSS(){if(!this.gradientDiv)return;const e=this.canvas.width,n=this.canvas.height,t=this.config.gradientColors;if(this.config.gradientType==="linear")if(this.config.gradientSpin){this.gradientAngle+=this.config.gradientSpeed;const i=this.gradientAngle*180/Math.PI;this.gradientDiv.style.background=`linear-gradient(${i}deg, ${t.join(", ")})`,this.gradientDiv.style.backgroundSize="",this.gradientDiv.style.backgroundPosition=""}else{const i=this.config.gradientFlowAngle,s=[...t,...t,...t,t[0]];this.gradientDiv.style.background=`linear-gradient(${i}deg, ${s.join(", ")})`,this.gradientDiv.style.backgroundSize="300% 300%",this.gradientFlowOffset=(this.gradientFlowOffset+this.config.gradientSpeed*.5)%100;const a=this.gradientFlowOffset;this.gradientDiv.style.backgroundPosition=`${a}% ${a}%`}else{const i=e/2,s=n/2,a=Math.min(e,n)*this.config.gradientOrbitRadius;this.gradientAngle+=this.config.gradientSpeed;let o=i+Math.cos(this.gradientAngle)*a,r=s+Math.sin(this.gradientAngle)*a;if(this.config.gradientMouseReaction&&this.mousePosition){const C=this.config.gradientMouseInfluence;o+=(this.mousePosition.x-o)*C,r+=(this.mousePosition.y-r)*C}this.gradientCenter.x+=(o-this.gradientCenter.x)*.03,this.gradientCenter.y+=(r-this.gradientCenter.y)*.03;const l=Math.max(e,n)*this.config.gradientRadius,c=[...t,...t,t[0]],u=l*2/(c.length-1),f=c.map((C,P)=>`${C} ${P*u}px`).join(", ");this.gradientDiv.style.background=`radial-gradient(circle at ${this.gradientCenter.x}px ${this.gradientCenter.y}px, ${f})`,this.gradientDiv.style.backgroundSize="",this.gradientDiv.style.backgroundPosition=""}}hexToRgb(e){e=e.replace(/^#/,""),e.length===3&&(e=e.split("").map(t=>t+t).join(""));const n=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?n.slice(1).map(t=>parseInt(t,16)).join(","):"255,255,255"}stop(){this.isRunning=!1,this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null)}start(){this.isRunning||(this.isRunning=!0,this.animate())}animate(){this.drawBackground(),this.updateParticles(),this.drawParticles(),this.drawConnections(),this.isRunning&&(this.animationId=requestAnimationFrame(()=>this.animate()))}updateConfig(e,n){this.config[e]=n,e==="particleCount"&&this.createParticles(),(e==="particleAssets"||e==="assets")&&(this.assetImages.clear(),this.assetTintCache.clear(),this.loadAssets(),this.assignParticleAssets()),(e==="mouseAttractPercentage"||e==="mouseAttractAssets")&&this.assignMouseBehavior(),e==="assetColor"&&this.assetTintCache.clear(),e==="moveSpeed"&&this.particles.forEach(t=>{const i=Math.sqrt(t.dx*t.dx+t.dy*t.dy);i>0&&(t.dx=t.dx/i*n,t.dy=t.dy/i*n)}),(e==="minRadius"||e==="maxRadius")&&this.particles.forEach(t=>{const i=this.config.maxRadius-this.config.minRadius,s=Math.random()*i+this.config.minRadius;t.radius=s}),e==="depthSpeed"&&this.particles.forEach(t=>{const i=t.dz>=0?1:-1;t.dz=i*(Math.random()*.5+.5)*n*2})}reset(e){this.config=this.validateConfig({...I,...e}),this.assetImages.clear(),this.assetTintCache.clear(),this.createParticles(),this.loadAssets(),this.stop(),this.start()}};const B=["star","heart","circle","bolt","fire","snowflake","leaf","sun","moon","cloud","gem","diamond","crown","music"],$="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/svgs",g={particleCount:100,minRadius:2,maxRadius:6,particleColor:"#a1a1aa",lineColor:"#71717a",lineWidth:1,lineOpacity:.2,maxDistance:150,moveSpeed:1,backgroundColor:"#0f0f14",backgroundOpacity:1,particleOpacity:1,mouseRadius:200,minParticleDistance:0,minParticleForce:.5,mouseInteraction:!0,pulseEnabled:!0,pulseSpeed:0,depthEffectEnabled:!0,depthSpeed:.02,gradientEnabled:!0,gradientType:"linear",gradientColors:["#667eea","#764ba2","#f093fb"],gradientSpeed:.02,gradientMouseReaction:!0,gradientMouseInfluence:.5,gradientAngle:0,gradientRadius:1,gradientSpin:!1,gradientDithering:!0,gradientSmoothStops:4,gradientFlowAngle:45,gradientOrbitRadius:.3},k=document.getElementById("canvas"),d=new O(k,{...g});d.start();const v=document.getElementById("controlToggle"),y=document.querySelector(".control-panel"),D=document.querySelector(".close-panel");v.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),y.classList.toggle("active"),v.classList.toggle("active")});D.addEventListener("click",()=>{y.classList.remove("active"),v.classList.remove("active")});document.addEventListener("click",e=>{!y.contains(e.target)&&!v.contains(e.target)&&(y.classList.remove("active"),v.classList.remove("active"))});y.addEventListener("click",e=>e.stopPropagation());function m(e){if(e.parentElement.querySelectorAll(".value-display").forEach(t=>{var i;if(!(t.dataset.for&&t.dataset.for!==e.id)&&!t.dataset.for&&e.id!=="minRadius"&&e.id!=="maxRadius"){let s=e.value;e.type==="range"&&(e.id.includes("Opacity")?s=Math.round(s)+"%":e.id==="pulseSpeed"?s=Math.round(s/.2*100)+"%":e.id==="gradientFlowAngle"?s=Math.round(parseFloat(s))+"°":s=parseFloat(s).toFixed((i=e.step)!=null&&i.includes(".")?3:0)),t.textContent=s}}),e.id==="minRadius"||e.id==="maxRadius"){const t=e.parentElement.querySelector('[data-for="minRadius"]'),i=e.parentElement.querySelector('[data-for="maxRadius"]');t&&(t.textContent=document.getElementById("minRadius").value),i&&(i.textContent=document.getElementById("maxRadius").value)}}function w(e){return e=e.replace(/^#/,""),e.length===3||e.length===6?"#"+e:null}function A(e,n,t){const i=e.value,s=parseInt((n==null?void 0:n.value)||100)/100;t==="backgroundColor"?(d.updateConfig("backgroundColor",i),d.updateConfig("backgroundOpacity",s)):t==="particleColor"?(d.updateConfig("particleColor",i),d.updateConfig("particleOpacity",s)):t==="lineColor"&&(d.updateConfig("lineColor",i),d.updateConfig("lineOpacity",s))}[{color:"backgroundColor",hex:"backgroundHex",opacity:"backgroundOpacity"},{color:"particleColor",hex:"particleHex",opacity:"particleOpacity"},{color:"lineColor",hex:"lineHex",opacity:"lineOpacity"}].forEach(({color:e,hex:n,opacity:t})=>{const i=document.getElementById(e),s=document.getElementById(n),a=document.getElementById(t);i.addEventListener("input",()=>{s.value=i.value.toUpperCase(),A(i,a,e)}),s.addEventListener("input",o=>{const r=w(o.target.value);r&&(i.value=r,s.value=r.toUpperCase(),A(i,a,e))}),a.addEventListener("input",()=>{m(a),A(i,a,e)}),s.addEventListener("blur",()=>{const o=w(s.value);s.value=o?o.toUpperCase():i.value.toUpperCase()})});var M;(M=document.getElementById("mouseAttractPercentage"))==null||M.addEventListener("input",e=>{const n=parseInt(e.target.value);e.target.parentElement.querySelector(".value-display").textContent=n+"%",d.updateConfig("mouseAttractPercentage",n)});document.querySelectorAll("input").forEach(e=>{e.id.includes("Color")||e.id.includes("Hex")||e.id.includes("Opacity")||e.id.startsWith("gradientColor")||e.id!=="gradientType"&&e.id!=="mouseAttractPercentage"&&e.addEventListener("input",n=>{let t=n.target.value;(n.target.type==="range"||n.target.type==="number")&&(t=parseFloat(t)),n.target.type==="checkbox"&&(t=n.target.checked),m(n.target);const i=n.target.id;i in g&&d.updateConfig(i,t)})});function S(e){const n=e==="radial";document.getElementById("gradientMouseReactionRow").style.display=n?"":"none",document.getElementById("gradientMouseInfluenceRow").style.display=n?"":"none"}document.getElementById("gradientType").addEventListener("change",e=>{d.updateConfig("gradientType",e.target.value),S(e.target.value)});document.getElementById("gradientFlowAngle").addEventListener("input",e=>{const n=parseFloat(e.target.value);m(e.target),d.updateConfig("gradientFlowAngle",n)});function x(){const e=document.getElementById("gradientColorsContainer"),n=d.config.gradientColors;e.innerHTML="",n.forEach((i,s)=>{const a=document.createElement("div");a.className="gradient-color-item";const o=document.createElement("input");o.type="color",o.value=i,o.dataset.index=String(s);const r=document.createElement("button");r.type="button",r.className="gradient-color-remove",r.textContent="−",r.dataset.index=String(s),r.disabled=n.length<=2,r.setAttribute("aria-label","Remove color"),a.appendChild(o),a.appendChild(r),e.appendChild(a)});const t=document.createElement("button");t.type="button",t.className="gradient-color-add",t.textContent="+",t.setAttribute("aria-label","Add color"),e.appendChild(t)}x();document.getElementById("gradientColorsContainer").addEventListener("input",e=>{if(e.target.type==="color"&&e.target.dataset.index!=null){const n=parseInt(e.target.dataset.index,10),t=[...d.config.gradientColors];t[n]=e.target.value,d.updateConfig("gradientColors",t)}});document.getElementById("gradientColorsContainer").addEventListener("click",e=>{if(e.target.classList.contains("gradient-color-remove")&&!e.target.disabled){const n=parseInt(e.target.dataset.index,10),t=[...d.config.gradientColors];t.length>2&&(t.splice(n,1),d.updateConfig("gradientColors",t),x())}if(e.target.classList.contains("gradient-color-add")){const n=[...d.config.gradientColors,"#667eea"];d.updateConfig("gradientColors",n),x()}});let h=[];function F(){const e={},n=[];for(const t of h){let i=null,s;if(t.source==="fa"&&t.faIcon){const a=t.faStyle||"solid";s=`fa_${a}_${t.faIcon}`,i=`${$}/${a}/${t.faIcon}.svg`}else t.source==="file"&&t.fileUrl&&(s=`file_${t.id}`,i=t.fileUrl);i&&(e[s]=i,n.push(t.mode==="count"?{asset:s,count:Math.max(0,Math.floor(t.value))}:{asset:s,percentage:Math.max(0,Math.min(100,t.value))}))}return{assets:e,particleAssets:n}}function b(){const{assets:e,particleAssets:n}=F();Object.keys(e).length>0?(d.updateConfig("assets",e),d.updateConfig("particleAssets",n)):(d.updateConfig("assets",void 0),d.updateConfig("particleAssets",void 0)),R()}function R(){const e=document.getElementById("mouseAttractAssetsRow"),n=document.getElementById("mouseAttractAssetsContainer"),t=d.config.assets,i=t?Object.keys(t):[];if(i.length===0){e.style.display="none",n.innerHTML="";return}e.style.display="",n.innerHTML="";const s=d.config.mouseAttractAssets??[];i.forEach(a=>{const o=document.createElement("label");o.className="toggle",o.style.cursor="pointer";const r=document.createElement("input");r.type="checkbox",r.value=a,r.checked=s.includes(a),r.addEventListener("change",()=>{const c=d.config.mouseAttractAssets??[],u=r.checked?[...c,a]:c.filter(f=>f!==a);d.updateConfig("mouseAttractAssets",u.length?u:void 0)});const l=document.createElement("span");l.className="toggle-label",l.textContent=a,o.appendChild(r),o.appendChild(l),n.appendChild(o)})}function p(){const e=document.getElementById("assetColorControls");e.style.display=h.length>0?"block":"none";const n=document.getElementById("assetEntriesContainer");n.innerHTML="",h.forEach(t=>{const i=document.createElement("div");i.className="asset-entry",i.dataset.id=t.id;const s=t.source==="fa"?`Font Awesome: ${t.faIcon}`:t.fileName||"File";i.innerHTML=`
      <div class="asset-entry-header">
        <span style="font-size:0.75rem;color:var(--text-muted)">${s}</span>
        <button type="button" class="asset-remove" data-id="${t.id}" aria-label="Remove">×</button>
      </div>
      <div class="asset-entry-source">
        <select data-field="source" data-id="${t.id}">
          <option value="fa" ${t.source==="fa"?"selected":""}>Font Awesome</option>
          <option value="file" ${t.source==="file"?"selected":""}>Upload PNG/SVG</option>
        </select>
        ${t.source==="fa"?`
          <select data-field="faStyle" data-id="${t.id}">
            <option value="solid" ${(t.faStyle||"solid")==="solid"?"selected":""}>Solid</option>
            <option value="regular" ${t.faStyle==="regular"?"selected":""}>Regular</option>
          </select>
          <select data-field="faIcon" data-id="${t.id}">
            ${B.map(a=>`<option value="${a}" ${t.faIcon===a?"selected":""}>${a}</option>`).join("")}
          </select>
        `:`
          <input type="file" data-id="${t.id}" accept="image/png,image/svg+xml,image/jpeg,image/webp" style="font-size:0.75rem;color:var(--text-muted)">
        `}
      </div>
      <div class="asset-entry-mode">
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer">
          <input type="radio" name="mode-${t.id}" value="count" ${t.mode==="count"?"checked":""}>
          <span style="font-size:0.8rem">Count</span>
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer">
          <input type="radio" name="mode-${t.id}" value="percentage" ${t.mode==="percentage"?"checked":""}>
          <span style="font-size:0.8rem">%</span>
        </label>
        <input type="number" data-field="value" data-id="${t.id}" value="${t.value}" min="0" max="${t.mode==="percentage"?100:999}">
      </div>
    `,n.appendChild(i)})}function z(){const e=document.getElementById("assetEntriesContainer");e.addEventListener("change",n=>{var s,a,o,r,l,c,u;const t=(s=n.target.dataset)==null?void 0:s.id;if(!t)return;const i=h.find(f=>f.id===t);if(i){if(((a=n.target.dataset)==null?void 0:a.field)==="source")i.source=n.target.value,i.source==="file"&&(i.fileUrl=null),p();else if(((o=n.target.dataset)==null?void 0:o.field)==="faStyle")i.faStyle=n.target.value;else if(((r=n.target.dataset)==null?void 0:r.field)==="faIcon")i.faIcon=n.target.value;else if(((l=n.target.dataset)==null?void 0:l.field)==="value")i.value=parseFloat(n.target.value)||0;else if(n.target.type==="radio"&&((c=n.target.name)!=null&&c.startsWith("mode-")))i.mode=n.target.value;else if(n.target.type==="file"&&((u=n.target.files)!=null&&u[0])){const f=n.target.files[0];i.fileUrl=URL.createObjectURL(f),i.fileName=f.name,p()}b()}}),e.addEventListener("input",n=>{var t;if(((t=n.target.dataset)==null?void 0:t.field)==="value"){const i=n.target.dataset.id,s=h.find(a=>a.id===i);s&&(s.value=parseFloat(n.target.value)||0,b())}}),e.addEventListener("click",n=>{if(n.target.classList.contains("asset-remove")){const t=n.target.dataset.id;h=h.filter(i=>i.id!==t),p(),b()}})}document.getElementById("addAssetBtn").addEventListener("click",()=>{h.push({id:crypto.randomUUID(),source:"fa",faIcon:"star",faStyle:"solid",mode:"count",value:10}),p(),b()});z();[{color:"assetColor",hex:"assetHex",opacity:"assetOpacity"}].forEach(({color:e,hex:n,opacity:t})=>{const i=document.getElementById(e),s=document.getElementById(n),a=document.getElementById(t);!i||!s||!a||(i.addEventListener("input",()=>{s.value=i.value.toUpperCase(),d.updateConfig(e,i.value)}),s.addEventListener("input",o=>{const r=w(o.target.value);r&&(i.value=r,s.value=r.toUpperCase(),d.updateConfig(e,r))}),a.addEventListener("input",()=>{const o=parseInt(a.value)/100;document.getElementById("assetOpacityDisplay").textContent=Math.round(a.value)+"%",d.updateConfig(t,o)}))});document.getElementById("reset").addEventListener("click",()=>{h=[],p(),d.updateConfig("assets",void 0),d.updateConfig("particleAssets",void 0),d.updateConfig("assetColor",void 0),d.updateConfig("assetOpacity",void 0),d.updateConfig("mouseAttractPercentage",void 0),d.updateConfig("mouseAttractAssets",void 0),R();const e=document.getElementById("assetColor"),n=document.getElementById("assetHex"),t=document.getElementById("assetOpacity");e&&(e.value="#a1a1aa"),n&&(n.value="#a1a1aa"),t&&(t.value=100,document.getElementById("assetOpacityDisplay").textContent="100%");const i=document.getElementById("mouseAttractPercentage");i&&(i.value=0,i.parentElement.querySelector(".value-display").textContent="0%"),Object.entries(g).forEach(([o,r])=>{const l=document.getElementById(o);l&&((l.type==="range"||l.type==="number")&&(l.value=r,m(l)),l.type==="checkbox"&&(l.checked=r),l.type==="color"&&(l.value=r),o==="gradientType"&&(l.value=r),o==="gradientFlowAngle"&&(l.value=r,m(l)))}),document.getElementById("backgroundHex").value=g.backgroundColor,document.getElementById("particleHex").value=g.particleColor,document.getElementById("lineHex").value=g.lineColor;const s=document.getElementById("gradientSpin");s&&(s.checked=g.gradientSpin);const a=document.getElementById("gradientFlowAngle");a&&(a.value=g.gradientFlowAngle,m(a)),d.reset(g),x(),S(g.gradientType)});document.getElementById("randomize").addEventListener("click",()=>{const e=Math.floor(Math.random()*200)+50;document.getElementById("particleCount").value=e,m(document.getElementById("particleCount")),d.updateConfig("particleCount",e);const n="#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0");document.getElementById("particleColor").value=n,document.getElementById("lineColor").value=n,document.getElementById("particleHex").value=n,document.getElementById("lineHex").value=n,d.updateConfig("particleColor",n),d.updateConfig("lineColor",n);const t={minRadius:Math.random()*4+1,maxRadius:Math.random()*6+4,maxDistance:Math.random()*200+100,moveSpeed:Math.random()*1.5+.2,mouseRadius:Math.random()*200+100,pulseSpeed:Math.random()*.2,depthSpeed:Math.random()*.06+.01,lineOpacity:Math.random()*80+10,particleOpacity:Math.random()*50+50};Object.entries(t).forEach(([i,s])=>{const a=document.getElementById(i);a&&(a.value=s,m(a),d.updateConfig(i,s))})});document.getElementById("copyJson").addEventListener("click",async()=>{const e={...d.config},n=JSON.stringify(e,null,2);try{await navigator.clipboard.writeText(n);const t=document.getElementById("copyJson"),i=t.textContent;t.textContent="Copied!",setTimeout(()=>t.textContent=i,1500)}catch(t){console.error("Copy failed:",t)}});
