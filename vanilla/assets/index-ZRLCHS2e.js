(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(e){if(e.ep)return;e.ep=!0;const i=a(e);fetch(e.href,i)}})();var T={particleCount:100,minRadius:2,maxRadius:6,particleColor:"#000000",lineColor:"#000000",lineWidth:1,lineOpacity:.2,maxDistance:150,moveSpeed:1,backgroundColor:"#ffffff",backgroundOpacity:1,particleOpacity:1,mouseRadius:200,mouseInteraction:!0,pulseEnabled:!0,pulseSpeed:0,depthEffectEnabled:!0,depthSpeed:.02,gradientEnabled:!1,gradientType:"linear",gradientColors:["#667eea","#764ba2"],gradientSpeed:.02,gradientMouseReaction:!0,gradientMouseInfluence:.5,gradientAngle:0,gradientRadius:1,gradientSpin:!1,gradientFlowAngle:45,gradientOrbitRadius:.3,gradientDithering:!0,gradientSmoothStops:4},C={color:"#88ccff",opacity:.6,blur:12,contrast:25,reflectionStrength:.85,highlightPosition:"top-left",highlightColor:"#ffffff",shadowStrength:.4,secondaryReflection:.25,secondaryHighlightPosition:"bottom-right",minRadius:20,maxRadius:40},b=/^#[0-9A-Fa-f]{6}$/;function z(t){return new Promise((n,a)=>{const s=new Image;s.onload=()=>n(s),s.onerror=()=>a(new Error(`Failed to load image: ${t.slice(0,50)}...`)),t.trim().startsWith("<")?s.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t))):s.src=t})}var H=class{constructor(t,n={}){this.particles=[],this.assetImages=new Map,this.assetTintCache=new Map,this.animationId=null,this.isRunning=!1,this.mousePosition=null,this.pulseAngle=0,this.gradientAngle=0,this.gradientFlowOffset=0,this.gradientCenter={x:0,y:0},this.smoothedMouseAngle=0,this.gradientDiv=null,this.canvas=t;const a=t.getContext("2d",{alpha:!0});if(!a)throw new Error("Could not initialize canvas context");this.ctx=a,this.config=this.validateConfig({...T,...n}),this.createGradientDiv(),this.boundHandleResize=this.handleResize.bind(this),this.boundHandleMouseMove=this.handleMouseMove.bind(this),this.boundHandleMouseLeave=this.handleMouseLeave.bind(this),this.handleResize(),this.createParticles(),this.assignParticleTypes(),this.loadAssets(),this.setupEventListeners()}loadAssets(){const{particleAssets:t,assets:n}=this.config;if(!(t!=null&&t.length)||!n)return;const a=new Set;for(const s of t)a.add(s.asset);for(const s of a){const e=n[s];e&&z(e).then(i=>{this.assetImages.set(s,i)}).catch(()=>{})}}createGradientDiv(){var t;this.gradientDiv=document.createElement("div"),this.gradientDiv.style.cssText="position:fixed;inset:0;width:100%;height:100%;pointer-events:none;z-index:-1;",(t=this.canvas.parentElement)==null||t.insertBefore(this.gradientDiv,this.canvas)}validateConfig(t){const n=["particleCount","minRadius","maxRadius","lineWidth","lineOpacity","maxDistance","moveSpeed","backgroundOpacity","particleOpacity","mouseRadius","pulseSpeed","depthSpeed","gradientSpeed","gradientMouseInfluence","gradientAngle","gradientRadius","gradientFlowAngle","gradientOrbitRadius","gradientSmoothStops"];for(const e of n){const i=t[e];if(typeof i!="number"||isNaN(i))throw new Error(`Invalid ${e}: must be a number`)}const a=["mouseInteraction","pulseEnabled","depthEffectEnabled","gradientEnabled","gradientMouseReaction","gradientSpin","gradientDithering"];for(const e of a)if(typeof t[e]!="boolean")throw new Error(`Invalid ${e}: must be a boolean`);const s=["backgroundColor","particleColor","lineColor"];for(const e of s)if(!b.test(t[e]))throw new Error(`Invalid ${e}: must be a valid hex color`);if(t.gradientEnabled){if(!Array.isArray(t.gradientColors)||t.gradientColors.length<2)throw new Error("gradientColors must be an array of at least 2 hex colors");for(const e of t.gradientColors)if(!b.test(e))throw new Error(`Invalid gradient color: ${e} must be valid hex`);if(t.gradientType!=="linear"&&t.gradientType!=="radial")throw new Error("gradientType must be 'linear' or 'radial'");if(t.gradientStops){if(t.gradientStops.length!==t.gradientColors.length)throw new Error("gradientStops length must match gradientColors length");for(let e=0;e<t.gradientStops.length;e++){const i=t.gradientStops[e];if(typeof i!="number"||i<0||i>1)throw new Error(`gradientStops[${e}] must be a number 0-1`);if(e>0&&i<=t.gradientStops[e-1])throw new Error("gradientStops must be strictly increasing")}}}if(t.particleAssets&&t.particleAssets.length>0){if(!t.assets||typeof t.assets!="object")throw new Error("assets map is required when using particleAssets");for(let e=0;e<t.particleAssets.length;e++){const i=t.particleAssets[e];if(typeof i.asset!="string"||!i.asset)throw new Error(`particleAssets[${e}].asset must be a non-empty string`);const o=i.count!==void 0,r=i.percentage!==void 0;if(o===r)throw new Error(`particleAssets[${e}]: specify exactly one of count or percentage`);if(o&&(typeof i.count!="number"||i.count<0))throw new Error(`particleAssets[${e}].count must be a non-negative number`);if(r&&(typeof i.percentage!="number"||i.percentage<0||i.percentage>100))throw new Error(`particleAssets[${e}].percentage must be 0-100`);if(!t.assets[i.asset])throw new Error(`particleAssets[${e}]: asset "${i.asset}" not found in assets map`)}}if(t.assetColor!=null&&!b.test(t.assetColor))throw new Error("assetColor must be a valid hex color");if(t.assetOpacity!=null&&(typeof t.assetOpacity!="number"||t.assetOpacity<0||t.assetOpacity>1))throw new Error("assetOpacity must be a number 0-1");if(t.mouseAttractPercentage!=null&&(typeof t.mouseAttractPercentage!="number"||t.mouseAttractPercentage<0||t.mouseAttractPercentage>100))throw new Error("mouseAttractPercentage must be 0-100");if(t.mouseAttractAssets!=null&&(!Array.isArray(t.mouseAttractAssets)||t.mouseAttractAssets.some(e=>typeof e!="string")))throw new Error("mouseAttractAssets must be an array of strings");if(t.minParticleDistance!=null&&(typeof t.minParticleDistance!="number"||t.minParticleDistance<0))throw new Error("minParticleDistance must be a non-negative number");if(t.minParticleForce!=null&&(typeof t.minParticleForce!="number"||t.minParticleForce<0||t.minParticleForce>2))throw new Error("minParticleForce must be 0-2");if(t.connectionRules!=null){const{allow:e,deny:i}=t.connectionRules,o=(r,l)=>{if(!Array.isArray(r))throw new Error(`connectionRules.${l} must be an array`);for(let u=0;u<r.length;u++){const d=r[u];if(!Array.isArray(d)||d.length!==2||typeof d[0]!="string"||typeof d[1]!="string")throw new Error(`connectionRules.${l}[${u}] must be [string, string]`)}};e!=null&&o(e,"allow"),i!=null&&o(i,"deny")}if(t.particleTypes!=null){if(!Array.isArray(t.particleTypes))throw new Error("particleTypes must be an array");if(!t.assets||typeof t.assets!="object")throw new Error("assets map is required when using particleTypes with asset entries");for(let e=0;e<t.particleTypes.length;e++){const i=t.particleTypes[e];if(!i||typeof i.type!="string")throw new Error(`particleTypes[${e}].type must be "circle", "asset", or "liquidGlass"`);if(i.type!=="circle"&&i.type!=="asset"&&i.type!=="liquidGlass")throw new Error(`particleTypes[${e}].type must be "circle", "asset", or "liquidGlass"`);const o=i.count!==void 0,r=i.percentage!==void 0;if(o===r)throw new Error(`particleTypes[${e}]: specify exactly one of count or percentage`);if(i.type==="asset"){if(typeof i.asset!="string"||!i.asset)throw new Error(`particleTypes[${e}].asset must be a non-empty string`);if(!t.assets[i.asset])throw new Error(`particleTypes[${e}]: asset "${i.asset}" not found in assets`)}}}if(t.liquidGlass!=null){const e=t.liquidGlass;if(e.color!=null&&!b.test(e.color))throw new Error("liquidGlass.color must be a valid hex color");if(e.opacity!=null&&(typeof e.opacity!="number"||e.opacity<0||e.opacity>1))throw new Error("liquidGlass.opacity must be 0-1");if(e.blur!=null&&(typeof e.blur!="number"||e.blur<0))throw new Error("liquidGlass.blur must be a non-negative number");if(e.contrast!=null&&(typeof e.contrast!="number"||e.contrast<1))throw new Error("liquidGlass.contrast must be >= 1");if(e.highlightColor!=null&&!b.test(e.highlightColor))throw new Error("liquidGlass.highlightColor must be a valid hex color");if(e.minRadius!=null&&(typeof e.minRadius!="number"||e.minRadius<=0))throw new Error("liquidGlass.minRadius must be a positive number");if(e.maxRadius!=null&&(typeof e.maxRadius!="number"||e.maxRadius<=0))throw new Error("liquidGlass.maxRadius must be a positive number")}if(t.liquidGlassPercentage!=null&&(typeof t.liquidGlassPercentage!="number"||t.liquidGlassPercentage<0||t.liquidGlassPercentage>100))throw new Error("liquidGlassPercentage must be 0-100");if(t.liquidGlassCount!=null&&(typeof t.liquidGlassCount!="number"||t.liquidGlassCount<0))throw new Error("liquidGlassCount must be a non-negative number");return t}setupEventListeners(){window.addEventListener("resize",this.boundHandleResize),this.canvas.addEventListener("mousemove",this.boundHandleMouseMove),this.canvas.addEventListener("mouseleave",this.boundHandleMouseLeave)}cleanup(){var t;window.removeEventListener("resize",this.boundHandleResize),this.canvas.removeEventListener("mousemove",this.boundHandleMouseMove),this.canvas.removeEventListener("mouseleave",this.boundHandleMouseLeave),(t=this.gradientDiv)==null||t.remove(),this.gradientDiv=null,this.stop()}handleMouseMove(t){const n=this.canvas.getBoundingClientRect();this.mousePosition={x:t.clientX-n.left,y:t.clientY-n.top}}handleMouseLeave(){this.mousePosition=null}handleResize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.gradientCenter={x:this.canvas.width/2,y:this.canvas.height/2}}createParticles(){this.particles=[];const t=this.config.particleCount;for(let n=0;n<t;n++){const a=this.config.maxRadius-this.config.minRadius,s=Math.random()*a+this.config.minRadius;this.particles.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,dx:(Math.random()-.5)*this.config.moveSpeed,dy:(Math.random()-.5)*this.config.moveSpeed,radius:s,z:Math.random(),dz:(Math.random()-.5)*this.config.depthSpeed*2})}this.assignParticleTypes()}assignParticleTypes(){const{particleTypes:t,particleAssets:n,particleCount:a}=this.config;if(this.particles.forEach(s=>{delete s.assetId,delete s.liquidGlass}),t!=null&&t.length){const s=[];for(const o of t){let r;o.count!==void 0?r=Math.floor(o.count):r=Math.floor(a*(o.percentage??0)/100),r>0&&(o.type==="circle"?s.push({liquidGlass:!1,count:r}):o.type==="asset"?s.push({assetId:o.asset,liquidGlass:o.liquidGlass??!1,count:r}):s.push({liquidGlass:!0,count:r}))}const e=[];for(let o=0;o<a;o++)e.push(o);for(let o=e.length-1;o>0;o--){const r=Math.floor(Math.random()*(o+1));[e[o],e[r]]=[e[r],e[o]]}let i=0;for(const{assetId:o,liquidGlass:r,count:l}of s)for(let u=0;u<l&&i<e.length;u++,i++){const d=this.particles[e[i]];o&&(d.assetId=o),d.liquidGlass=r,r&&this.resizeAsLiquidGlass(d)}}else if(n!=null&&n.length){const s=[];for(const o of n){let r;o.count!==void 0?r=Math.floor(o.count):r=Math.floor(a*(o.percentage??0)/100),r>0&&s.push({assetId:o.asset,count:r})}const e=[];for(let o=0;o<a;o++)e.push(o);for(let o=e.length-1;o>0;o--){const r=Math.floor(Math.random()*(o+1));[e[o],e[r]]=[e[r],e[o]]}let i=0;for(const{assetId:o,count:r}of s)for(let l=0;l<r&&i<e.length;l++,i++)this.particles[e[i]].assetId=o}!(t!=null&&t.length)&&(this.config.liquidGlassPercentage!=null||this.config.liquidGlassCount!=null)&&this.assignLiquidGlass(),this.assignMouseBehavior()}assignLiquidGlass(){const{liquidGlassPercentage:t,liquidGlassCount:n,particleCount:a}=this.config;this.particles.forEach(i=>i.liquidGlass=!1);let s=0;if(n!=null&&n>0?s=Math.min(Math.floor(n),a):t!=null&&t>0&&(s=Math.floor(a*Math.min(100,Math.max(0,t))/100)),s<=0)return;const e=[];for(let i=0;i<a;i++)e.push(i);for(let i=e.length-1;i>0;i--){const o=Math.floor(Math.random()*(i+1));[e[i],e[o]]=[e[o],e[i]]}for(let i=0;i<s&&i<e.length;i++){const o=this.particles[e[i]];o.liquidGlass=!0,this.resizeAsLiquidGlass(o)}}resizeAsLiquidGlass(t){const n=this.getLiquidGlassConfig(),a=n.minRadius??C.minRadius,s=n.maxRadius??C.maxRadius;t.radius=Math.random()*(s-a)+a,delete t.currentRadius,this.initBlob(t)}initBlob(t){const s=[],e=[],i=[],o=[];for(let l=0;l<3;l++)s.push(2+l),e.push((.03+Math.random()*.03)/(1+l*.4)),i.push(Math.random()*Math.PI*2),o.push((.006+Math.random()*.01)*(Math.random()>.5?1:-1));const r=Math.random()*Math.PI*2;t.blob={pointCount:12,freqs:s,amps:e,phases:i,phaseSpeeds:o,rotSpeed:(Math.random()>.5?1:-1)*(.001+Math.random()*.003),rotation:Math.random()*Math.PI*2,hlAngle:r,hlAngleSpeed:(.002+Math.random()*.004)*(Math.random()>.5?1:-1),mouseStretchX:0,mouseStretchY:0}}assignMouseBehavior(){const{mouseAttractPercentage:t,mouseAttractAssets:n,particleCount:a}=this.config;this.particles.forEach(e=>e.mouseAttract=!1);const s=new Set(n??[]);if(s.size>0&&this.particles.forEach(e=>{e.assetId&&s.has(e.assetId)&&(e.mouseAttract=!0)}),t!=null&&t>0){const e=Math.floor(a*Math.min(100,Math.max(0,t))/100),i=[];for(let o=0;o<a;o++)i.push(o);for(let o=i.length-1;o>0;o--){const r=Math.floor(Math.random()*(o+1));[i[o],i[r]]=[i[r],i[o]]}for(let o=0;o<e&&o<i.length;o++)this.particles[i[o]].mouseAttract=!0}}updateParticles(){this.particles.forEach(t=>{if(this.config.depthEffectEnabled&&(t.z+=t.dz,t.z<=0?(t.z=0,t.dz=Math.abs(t.dz)):t.z>=1&&(t.z=1,t.dz=-Math.abs(t.dz))),this.config.pulseEnabled){this.pulseAngle+=this.config.pulseSpeed;const e=Math.sin(this.pulseAngle)*.5+1;t.currentRadius=t.radius*e}else t.currentRadius=t.radius;if(this.config.depthEffectEnabled){const e=.4+.6*t.z;t.currentRadius=(t.currentRadius??t.radius)*e}if(t.x+=t.dx,t.y+=t.dy,this.config.mouseInteraction&&this.mousePosition){const e=this.mousePosition.x-t.x,i=this.mousePosition.y-t.y,o=Math.sqrt(e*e+i*i);if(o<this.config.mouseRadius){const r=(this.config.mouseRadius-o)/this.config.mouseRadius,l=Math.atan2(i,e),u=Math.cos(l)*r*.5,d=Math.sin(l)*r*.5;t.mouseAttract?(t.dx+=u,t.dy+=d):(t.dx-=u,t.dy-=d)}}const n=this.config.minParticleDistance??0,a=this.config.minParticleForce??.5;if(n>0&&a>0){const e=t.currentRadius??t.radius;for(const i of this.particles){if(i===t)continue;const o=i.x-t.x,r=i.y-t.y,l=Math.sqrt(o*o+r*r),u=i.currentRadius??i.radius,d=l-e-u;if(d<n&&l>.001){const h=(n-d)/n*a,g=-o/l,f=-r/l;t.dx+=g*h,t.dy+=f*h}}}(t.x<0||t.x>this.canvas.width)&&(t.dx=-t.dx),(t.y<0||t.y>this.canvas.height)&&(t.dy=-t.dy);const s=Math.sqrt(t.dx*t.dx+t.dy*t.dy);s>this.config.moveSpeed&&(t.dx=t.dx/s*this.config.moveSpeed,t.dy=t.dy/s*this.config.moveSpeed)})}getLiquidGlassConfig(){return{...C,...this.config.liquidGlass}}getHighlightOffset(t,n){switch(t){case"top-left":return{x:n*-.35,y:n*-.35};case"top":return{x:0,y:n*-.4};case"top-right":return{x:n*.35,y:n*-.35};case"bottom-right":return{x:n*.3,y:n*.3};case"center":default:return{x:n*-.2,y:n*-.2}}}traceBlobPath(t,n,a,s){const e=s.pointCount,i=s.mouseStretchX,o=s.mouseStretchY,r=[];for(let d=0;d<e;d++){const h=d/e*Math.PI*2,g=h+s.rotation;let f=0;for(let v=0;v<s.freqs.length;v++)f+=s.amps[v]*Math.sin(s.freqs[v]*g+s.phases[v]);const A=a*(1+f);let I=t+Math.cos(h)*A,S=n+Math.sin(h)*A;I+=i*Math.cos(h)*Math.max(0,Math.cos(h)),S+=o*Math.sin(h)*Math.max(0,Math.sin(h)),r.push({x:I,y:S})}this.ctx.beginPath();const l=r[e-1],u=r[0];this.ctx.moveTo((l.x+u.x)/2,(l.y+u.y)/2);for(let d=0;d<e;d++){const h=r[(d+1)%e];this.ctx.quadraticCurveTo(r[d].x,r[d].y,(r[d].x+h.x)/2,(r[d].y+h.y)/2)}this.ctx.closePath()}updateBlobMouse(t){const n=t.blob;if(!n)return;const a=t.currentRadius??t.radius,s=.08;if(this.config.mouseInteraction&&this.mousePosition){const e=this.mousePosition.x-t.x,i=this.mousePosition.y-t.y,o=Math.sqrt(e*e+i*i),r=this.config.mouseRadius;if(o<r&&o>.01){const u=(r-o)/r*a*.4,d=e/o,h=i/o,g=d*u,f=h*u;n.mouseStretchX+=(g-n.mouseStretchX)*s,n.mouseStretchY+=(f-n.mouseStretchY)*s;return}}n.mouseStretchX*=1-s,n.mouseStretchY*=1-s}draw3DFluidSphere(t){const n=this.getLiquidGlassConfig(),a=t.currentRadius??t.radius;if(a<=0)return;t.blob||this.initBlob(t);const s=t.blob,e=t.x,i=t.y;let o=(n.opacity??C.opacity)*this.config.particleOpacity;if(this.config.depthEffectEnabled&&(o*=.6+.4*t.z),o<=0)return;s.rotation+=s.rotSpeed;for(let R=0;R<s.phases.length;R++)s.phases[R]+=s.phaseSpeeds[R];s.hlAngle+=s.hlAngleSpeed,this.updateBlobMouse(t);const r=n.color??C.color,l=parseInt(r.slice(1,3),16),u=parseInt(r.slice(3,5),16),d=parseInt(r.slice(5,7),16),h=n.shadowStrength??C.shadowStrength,g=a*.35,f=e+Math.cos(s.hlAngle)*g,A=i+Math.sin(s.hlAngle)*g,I=Math.min(255,l+Math.round((255-l)*.55)),S=Math.min(255,u+Math.round((255-u)*.55)),v=Math.min(255,d+Math.round((255-d)*.55)),B=Math.max(0,Math.round(l*(1-h*.35))),O=Math.max(0,Math.round(u*(1-h*.35))),G=Math.max(0,Math.round(d*(1-h*.35)));this.ctx.save();const E=this.ctx.createRadialGradient(f,A,a*.05,e,i,a*1.05);E.addColorStop(0,`rgba(${I},${S},${v}, ${o*.95})`),E.addColorStop(.4,`rgba(${l},${u},${d}, ${o*.8})`),E.addColorStop(.8,`rgba(${B},${O},${G}, ${o*.6})`),E.addColorStop(1,`rgba(${B},${O},${G}, ${o*.25})`),this.ctx.fillStyle=E,this.traceBlobPath(e,i,a,s),this.ctx.fill(),this.ctx.restore()}getTintedCanvas(t,n){const a=`${t.src}_${n}`,s=this.assetTintCache.get(a);if(s)return s;const e=128,i=document.createElement("canvas");i.width=e,i.height=e;const o=i.getContext("2d");return o.fillStyle=n,o.fillRect(0,0,e,e),o.globalCompositeOperation="destination-in",o.drawImage(t,0,0,e,e),this.assetTintCache.set(a,i),i}drawParticles(){const t=this.config.particleColor,n=this.config.assetColor,a=this.config.assetOpacity??1;this.particles.forEach(s=>{if(s.liquidGlass){this.draw3DFluidSphere(s);return}let e=this.config.particleOpacity;this.config.depthEffectEnabled&&(e*=.6+.4*s.z);const i=s.currentRadius??s.radius,o=s.assetId?this.assetImages.get(s.assetId):null;if(o){this.ctx.globalAlpha=e*a;const r=i*2,l=s.x-i,u=s.y-i;n&&b.test(n)?this.ctx.drawImage(this.getTintedCanvas(o,n),l,u,r,r):this.ctx.drawImage(o,l,u,r,r)}else this.ctx.globalAlpha=e,this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.arc(s.x,s.y,i,0,Math.PI*2),this.ctx.fill()}),this.ctx.globalAlpha=1}getCategory(t){return t.assetId??"default"}canConnect(t,n){var o;const a=this.config.connectionRules;if(!a)return!0;const s=this.getCategory(t),e=this.getCategory(n),i=[s,e].sort().join("|");return(o=a.deny)!=null&&o.length&&a.deny.some(([l,u])=>[l,u].sort().join("|")===i)?!1:a.allow&&a.allow.length>0?a.allow.some(([r,l])=>[r,l].sort().join("|")===i):!0}drawConnections(){for(let t=0;t<this.particles.length;t++)for(let n=t+1;n<this.particles.length;n++){const a=this.particles[t].x-this.particles[n].x,s=this.particles[t].y-this.particles[n].y,e=Math.sqrt(a*a+s*s);if(e<this.config.maxDistance&&this.canConnect(this.particles[t],this.particles[n])){const i=1-e/this.config.maxDistance,o=this.hexToRgb(this.config.lineColor);this.ctx.beginPath(),this.ctx.strokeStyle=`rgba(${o}, ${i*this.config.lineOpacity})`,this.ctx.lineWidth=this.config.lineWidth,this.ctx.moveTo(this.particles[t].x,this.particles[t].y),this.ctx.lineTo(this.particles[n].x,this.particles[n].y),this.ctx.stroke()}}}drawBackground(){this.config.gradientEnabled&&this.gradientDiv?(this.gradientDiv.style.display="",this.gradientDiv.style.opacity=String(this.config.backgroundOpacity),this.updateGradientCSS(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):(this.gradientDiv&&(this.gradientDiv.style.display="none"),this.ctx.globalAlpha=this.config.backgroundOpacity,this.ctx.fillStyle=this.config.backgroundColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.globalAlpha=1)}updateGradientCSS(){if(!this.gradientDiv)return;const t=this.canvas.width,n=this.canvas.height,a=this.config.gradientColors;if(this.config.gradientType==="linear")if(this.config.gradientSpin){this.gradientAngle+=this.config.gradientSpeed;const s=this.gradientAngle*180/Math.PI;this.gradientDiv.style.background=`linear-gradient(${s}deg, ${a.join(", ")})`,this.gradientDiv.style.backgroundSize="",this.gradientDiv.style.backgroundPosition=""}else{const s=this.config.gradientFlowAngle,e=[...a,...a,...a,a[0]];this.gradientDiv.style.background=`linear-gradient(${s}deg, ${e.join(", ")})`,this.gradientDiv.style.backgroundSize="300% 300%",this.gradientFlowOffset=(this.gradientFlowOffset+this.config.gradientSpeed*.5)%100;const i=this.gradientFlowOffset;this.gradientDiv.style.backgroundPosition=`${i}% ${i}%`}else{const s=t/2,e=n/2,i=Math.min(t,n)*this.config.gradientOrbitRadius;this.gradientAngle+=this.config.gradientSpeed;let o=s+Math.cos(this.gradientAngle)*i,r=e+Math.sin(this.gradientAngle)*i;if(this.config.gradientMouseReaction&&this.mousePosition){const g=this.config.gradientMouseInfluence;o+=(this.mousePosition.x-o)*g,r+=(this.mousePosition.y-r)*g}this.gradientCenter.x+=(o-this.gradientCenter.x)*.03,this.gradientCenter.y+=(r-this.gradientCenter.y)*.03;const l=Math.max(t,n)*this.config.gradientRadius,u=[...a,...a,a[0]],d=l*2/(u.length-1),h=u.map((g,f)=>`${g} ${f*d}px`).join(", ");this.gradientDiv.style.background=`radial-gradient(circle at ${this.gradientCenter.x}px ${this.gradientCenter.y}px, ${h})`,this.gradientDiv.style.backgroundSize="",this.gradientDiv.style.backgroundPosition=""}}hexToRgb(t){t=t.replace(/^#/,""),t.length===3&&(t=t.split("").map(a=>a+a).join(""));const n=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?n.slice(1).map(a=>parseInt(a,16)).join(","):"255,255,255"}stop(){this.isRunning=!1,this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null)}start(){this.isRunning||(this.isRunning=!0,this.animate())}animate(){this.drawBackground(),this.updateParticles(),this.drawParticles(),this.drawConnections(),this.isRunning&&(this.animationId=requestAnimationFrame(()=>this.animate()))}updateConfig(t,n){var a;this.config[t]=n,t==="particleCount"&&this.createParticles(),(t==="particleAssets"||t==="assets"||t==="particleTypes")&&(this.assetImages.clear(),this.assetTintCache.clear(),this.loadAssets(),this.assignParticleTypes()),(t==="liquidGlassPercentage"||t==="liquidGlassCount")&&((a=this.config.particleTypes)!=null&&a.length||this.assignLiquidGlass()),(t==="mouseAttractPercentage"||t==="mouseAttractAssets")&&this.assignMouseBehavior(),t==="assetColor"&&this.assetTintCache.clear(),t==="moveSpeed"&&this.particles.forEach(s=>{const e=Math.sqrt(s.dx*s.dx+s.dy*s.dy);e>0&&(s.dx=s.dx/e*n,s.dy=s.dy/e*n)}),(t==="minRadius"||t==="maxRadius")&&this.particles.forEach(s=>{const e=this.config.maxRadius-this.config.minRadius,i=Math.random()*e+this.config.minRadius;s.radius=i}),t==="depthSpeed"&&this.particles.forEach(s=>{const e=s.dz>=0?1:-1;s.dz=e*(Math.random()*.5+.5)*n*2})}reset(t){this.config=this.validateConfig({...T,...t}),this.assetImages.clear(),this.assetTintCache.clear(),this.createParticles(),this.loadAssets(),this.stop(),this.start()}};const j=["star","heart","circle","bolt","fire","snowflake","leaf","sun","moon","cloud","gem","diamond","crown","music"],U="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/svgs",m={particleCount:100,minRadius:2,maxRadius:6,particleColor:"#a1a1aa",lineColor:"#71717a",lineWidth:1,lineOpacity:.2,maxDistance:150,moveSpeed:1,backgroundColor:"#0f0f14",backgroundOpacity:1,particleOpacity:1,mouseRadius:200,minParticleDistance:0,minParticleForce:.5,mouseInteraction:!0,pulseEnabled:!0,pulseSpeed:0,depthEffectEnabled:!0,depthSpeed:.02,gradientEnabled:!0,gradientType:"linear",gradientColors:["#667eea","#764ba2","#f093fb"],gradientSpeed:.02,gradientMouseReaction:!0,gradientMouseInfluence:.5,gradientAngle:0,gradientRadius:1,gradientSpin:!1,gradientDithering:!0,gradientSmoothStops:4,gradientFlowAngle:45,gradientOrbitRadius:.3},N=document.getElementById("canvas"),c=new H(N,{...m});c.start();const w=document.getElementById("controlToggle"),M=document.querySelector(".control-panel"),_=document.querySelector(".close-panel");w.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),M.classList.toggle("active"),w.classList.toggle("active")});_.addEventListener("click",()=>{M.classList.remove("active"),w.classList.remove("active")});document.addEventListener("click",t=>{!M.contains(t.target)&&!w.contains(t.target)&&(M.classList.remove("active"),w.classList.remove("active"))});M.addEventListener("click",t=>t.stopPropagation());function y(t){if(t.parentElement.querySelectorAll(".value-display").forEach(a=>{var s;if(!(a.dataset.for&&a.dataset.for!==t.id)&&!a.dataset.for&&t.id!=="minRadius"&&t.id!=="maxRadius"){let e=t.value;t.type==="range"&&(t.id.includes("Opacity")?e=Math.round(e)+"%":t.id==="pulseSpeed"?e=Math.round(e/.2*100)+"%":t.id==="gradientFlowAngle"?e=Math.round(parseFloat(e))+"°":e=parseFloat(e).toFixed((s=t.step)!=null&&s.includes(".")?3:0)),a.textContent=e}}),t.id==="minRadius"||t.id==="maxRadius"){const a=t.parentElement.querySelector('[data-for="minRadius"]'),s=t.parentElement.querySelector('[data-for="maxRadius"]');a&&(a.textContent=document.getElementById("minRadius").value),s&&(s.textContent=document.getElementById("maxRadius").value)}}function q(t){return t=t.replace(/^#/,""),t.length===3||t.length===6?"#"+t:null}function L(t,n,a){const s=t.value,e=parseInt((n==null?void 0:n.value)||100)/100;a==="backgroundColor"?(c.updateConfig("backgroundColor",s),c.updateConfig("backgroundOpacity",e)):a==="particleColor"?(c.updateConfig("particleColor",s),c.updateConfig("particleOpacity",e)):a==="lineColor"&&(c.updateConfig("lineColor",s),c.updateConfig("lineOpacity",e))}[{color:"backgroundColor",hex:"backgroundHex",opacity:"backgroundOpacity"},{color:"particleColor",hex:"particleHex",opacity:"particleOpacity"},{color:"lineColor",hex:"lineHex",opacity:"lineOpacity"}].forEach(({color:t,hex:n,opacity:a})=>{const s=document.getElementById(t),e=document.getElementById(n),i=document.getElementById(a);s.addEventListener("input",()=>{e.value=s.value.toUpperCase(),L(s,i,t)}),e.addEventListener("input",o=>{const r=q(o.target.value);r&&(s.value=r,e.value=r.toUpperCase(),L(s,i,t))}),i.addEventListener("input",()=>{y(i),L(s,i,t)}),e.addEventListener("blur",()=>{const o=q(e.value);e.value=o?o.toUpperCase():s.value.toUpperCase()})});var D;(D=document.getElementById("mouseAttractPercentage"))==null||D.addEventListener("input",t=>{const n=parseInt(t.target.value);t.target.parentElement.querySelector(".value-display").textContent=n+"%",c.updateConfig("mouseAttractPercentage",n)});document.querySelectorAll("input").forEach(t=>{t.id.includes("Color")||t.id.includes("Hex")||t.id.includes("Opacity")||t.id.startsWith("gradientColor")||t.id!=="gradientType"&&t.id!=="mouseAttractPercentage"&&t.addEventListener("input",n=>{let a=n.target.value;(n.target.type==="range"||n.target.type==="number")&&(a=parseFloat(a)),n.target.type==="checkbox"&&(a=n.target.checked),y(n.target);const s=n.target.id;s in m&&c.updateConfig(s,a)})});function k(t){const n=t==="radial";document.getElementById("gradientMouseReactionRow").style.display=n?"":"none",document.getElementById("gradientMouseInfluenceRow").style.display=n?"":"none"}document.getElementById("gradientType").addEventListener("change",t=>{c.updateConfig("gradientType",t.target.value),k(t.target.value)});document.getElementById("gradientFlowAngle").addEventListener("input",t=>{const n=parseFloat(t.target.value);y(t.target),c.updateConfig("gradientFlowAngle",n)});function $(){const t=document.getElementById("gradientColorsContainer"),n=c.config.gradientColors;t.innerHTML="",n.forEach((s,e)=>{const i=document.createElement("div");i.className="gradient-color-item";const o=document.createElement("input");o.type="color",o.value=s,o.dataset.index=String(e);const r=document.createElement("button");r.type="button",r.className="gradient-color-remove",r.textContent="−",r.dataset.index=String(e),r.disabled=n.length<=2,r.setAttribute("aria-label","Remove color"),i.appendChild(o),i.appendChild(r),t.appendChild(i)});const a=document.createElement("button");a.type="button",a.className="gradient-color-add",a.textContent="+",a.setAttribute("aria-label","Add color"),t.appendChild(a)}$();document.getElementById("gradientColorsContainer").addEventListener("input",t=>{if(t.target.type==="color"&&t.target.dataset.index!=null){const n=parseInt(t.target.dataset.index,10),a=[...c.config.gradientColors];a[n]=t.target.value,c.updateConfig("gradientColors",a)}});document.getElementById("gradientColorsContainer").addEventListener("click",t=>{if(t.target.classList.contains("gradient-color-remove")&&!t.target.disabled){const n=parseInt(t.target.dataset.index,10),a=[...c.config.gradientColors];a.length>2&&(a.splice(n,1),c.updateConfig("gradientColors",a),$())}if(t.target.classList.contains("gradient-color-add")){const n=[...c.config.gradientColors,"#667eea"];c.updateConfig("gradientColors",n),$()}});let p=[];function X(){const t={},n=[];for(const a of p){let s=null,e;if(a.source==="fa"&&a.faIcon){const i=a.faStyle||"solid";e=`fa_${i}_${a.faIcon}`,s=`${U}/${i}/${a.faIcon}.svg`}else a.source==="file"&&a.fileUrl&&(e=`file_${a.id}`,s=a.fileUrl);s&&(t[e]=s,n.push(a.mode==="count"?{asset:e,count:Math.max(0,Math.floor(a.value))}:{asset:e,percentage:Math.max(0,Math.min(100,a.value))}))}return{assets:t,particleAssets:n}}function P(){const{assets:t,particleAssets:n}=X();Object.keys(t).length>0?(c.updateConfig("assets",t),c.updateConfig("particleAssets",n)):(c.updateConfig("assets",void 0),c.updateConfig("particleAssets",void 0)),F()}function F(){const t=document.getElementById("mouseAttractAssetsRow"),n=document.getElementById("mouseAttractAssetsContainer"),a=c.config.assets,s=a?Object.keys(a):[];if(s.length===0){t.style.display="none",n.innerHTML="";return}t.style.display="",n.innerHTML="";const e=c.config.mouseAttractAssets??[];s.forEach(i=>{const o=document.createElement("label");o.className="toggle",o.style.cursor="pointer";const r=document.createElement("input");r.type="checkbox",r.value=i,r.checked=e.includes(i),r.addEventListener("change",()=>{const u=c.config.mouseAttractAssets??[],d=r.checked?[...u,i]:u.filter(h=>h!==i);c.updateConfig("mouseAttractAssets",d.length?d:void 0)});const l=document.createElement("span");l.className="toggle-label",l.textContent=i,o.appendChild(r),o.appendChild(l),n.appendChild(o)})}function x(){const t=document.getElementById("assetColorControls");t.style.display=p.length>0?"block":"none";const n=document.getElementById("assetEntriesContainer");n.innerHTML="",p.forEach(a=>{const s=document.createElement("div");s.className="asset-entry",s.dataset.id=a.id;const e=a.source==="fa"?`Font Awesome: ${a.faIcon}`:a.fileName||"File";s.innerHTML=`
      <div class="asset-entry-header">
        <span style="font-size:0.75rem;color:var(--text-muted)">${e}</span>
        <button type="button" class="asset-remove" data-id="${a.id}" aria-label="Remove">×</button>
      </div>
      <div class="asset-entry-source">
        <select data-field="source" data-id="${a.id}">
          <option value="fa" ${a.source==="fa"?"selected":""}>Font Awesome</option>
          <option value="file" ${a.source==="file"?"selected":""}>Upload PNG/SVG</option>
        </select>
        ${a.source==="fa"?`
          <select data-field="faStyle" data-id="${a.id}">
            <option value="solid" ${(a.faStyle||"solid")==="solid"?"selected":""}>Solid</option>
            <option value="regular" ${a.faStyle==="regular"?"selected":""}>Regular</option>
          </select>
          <select data-field="faIcon" data-id="${a.id}">
            ${j.map(i=>`<option value="${i}" ${a.faIcon===i?"selected":""}>${i}</option>`).join("")}
          </select>
        `:`
          <input type="file" data-id="${a.id}" accept="image/png,image/svg+xml,image/jpeg,image/webp" style="font-size:0.75rem;color:var(--text-muted)">
        `}
      </div>
      <div class="asset-entry-mode">
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer">
          <input type="radio" name="mode-${a.id}" value="count" ${a.mode==="count"?"checked":""}>
          <span style="font-size:0.8rem">Count</span>
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer">
          <input type="radio" name="mode-${a.id}" value="percentage" ${a.mode==="percentage"?"checked":""}>
          <span style="font-size:0.8rem">%</span>
        </label>
        <input type="number" data-field="value" data-id="${a.id}" value="${a.value}" min="0" max="${a.mode==="percentage"?100:999}">
      </div>
    `,n.appendChild(s)})}function W(){const t=document.getElementById("assetEntriesContainer");t.addEventListener("change",n=>{var e,i,o,r,l,u,d;const a=(e=n.target.dataset)==null?void 0:e.id;if(!a)return;const s=p.find(h=>h.id===a);if(s){if(((i=n.target.dataset)==null?void 0:i.field)==="source")s.source=n.target.value,s.source==="file"&&(s.fileUrl=null),x();else if(((o=n.target.dataset)==null?void 0:o.field)==="faStyle")s.faStyle=n.target.value;else if(((r=n.target.dataset)==null?void 0:r.field)==="faIcon")s.faIcon=n.target.value;else if(((l=n.target.dataset)==null?void 0:l.field)==="value")s.value=parseFloat(n.target.value)||0;else if(n.target.type==="radio"&&((u=n.target.name)!=null&&u.startsWith("mode-")))s.mode=n.target.value;else if(n.target.type==="file"&&((d=n.target.files)!=null&&d[0])){const h=n.target.files[0];s.fileUrl=URL.createObjectURL(h),s.fileName=h.name,x()}P()}}),t.addEventListener("input",n=>{var a;if(((a=n.target.dataset)==null?void 0:a.field)==="value"){const s=n.target.dataset.id,e=p.find(i=>i.id===s);e&&(e.value=parseFloat(n.target.value)||0,P())}}),t.addEventListener("click",n=>{if(n.target.classList.contains("asset-remove")){const a=n.target.dataset.id;p=p.filter(s=>s.id!==a),x(),P()}})}document.getElementById("addAssetBtn").addEventListener("click",()=>{p.push({id:crypto.randomUUID(),source:"fa",faIcon:"star",faStyle:"solid",mode:"count",value:10}),x(),P()});W();[{color:"assetColor",hex:"assetHex",opacity:"assetOpacity"}].forEach(({color:t,hex:n,opacity:a})=>{const s=document.getElementById(t),e=document.getElementById(n),i=document.getElementById(a);!s||!e||!i||(s.addEventListener("input",()=>{e.value=s.value.toUpperCase(),c.updateConfig(t,s.value)}),e.addEventListener("input",o=>{const r=q(o.target.value);r&&(s.value=r,e.value=r.toUpperCase(),c.updateConfig(t,r))}),i.addEventListener("input",()=>{const o=parseInt(i.value)/100;document.getElementById("assetOpacityDisplay").textContent=Math.round(i.value)+"%",c.updateConfig(a,o)}))});document.getElementById("reset").addEventListener("click",()=>{p=[],x(),c.updateConfig("assets",void 0),c.updateConfig("particleAssets",void 0),c.updateConfig("assetColor",void 0),c.updateConfig("assetOpacity",void 0),c.updateConfig("mouseAttractPercentage",void 0),c.updateConfig("mouseAttractAssets",void 0),F();const t=document.getElementById("assetColor"),n=document.getElementById("assetHex"),a=document.getElementById("assetOpacity");t&&(t.value="#a1a1aa"),n&&(n.value="#a1a1aa"),a&&(a.value=100,document.getElementById("assetOpacityDisplay").textContent="100%");const s=document.getElementById("mouseAttractPercentage");s&&(s.value=0,s.parentElement.querySelector(".value-display").textContent="0%"),Object.entries(m).forEach(([o,r])=>{const l=document.getElementById(o);l&&((l.type==="range"||l.type==="number")&&(l.value=r,y(l)),l.type==="checkbox"&&(l.checked=r),l.type==="color"&&(l.value=r),o==="gradientType"&&(l.value=r),o==="gradientFlowAngle"&&(l.value=r,y(l)))}),document.getElementById("backgroundHex").value=m.backgroundColor,document.getElementById("particleHex").value=m.particleColor,document.getElementById("lineHex").value=m.lineColor;const e=document.getElementById("gradientSpin");e&&(e.checked=m.gradientSpin);const i=document.getElementById("gradientFlowAngle");i&&(i.value=m.gradientFlowAngle,y(i)),c.reset(m),$(),k(m.gradientType)});document.getElementById("randomize").addEventListener("click",()=>{const t=Math.floor(Math.random()*200)+50;document.getElementById("particleCount").value=t,y(document.getElementById("particleCount")),c.updateConfig("particleCount",t);const n="#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0");document.getElementById("particleColor").value=n,document.getElementById("lineColor").value=n,document.getElementById("particleHex").value=n,document.getElementById("lineHex").value=n,c.updateConfig("particleColor",n),c.updateConfig("lineColor",n);const a={minRadius:Math.random()*4+1,maxRadius:Math.random()*6+4,maxDistance:Math.random()*200+100,moveSpeed:Math.random()*1.5+.2,mouseRadius:Math.random()*200+100,pulseSpeed:Math.random()*.2,depthSpeed:Math.random()*.06+.01,lineOpacity:Math.random()*80+10,particleOpacity:Math.random()*50+50};Object.entries(a).forEach(([s,e])=>{const i=document.getElementById(s);i&&(i.value=e,y(i),c.updateConfig(s,e))})});document.getElementById("copyJson").addEventListener("click",async()=>{const t={...c.config},n=JSON.stringify(t,null,2);try{await navigator.clipboard.writeText(n);const a=document.getElementById("copyJson"),s=a.textContent;a.textContent="Copied!",setTimeout(()=>a.textContent=s,1500)}catch(a){console.error("Copy failed:",a)}});
